# MongoDB Components

MongoDB organizes data into a hierarchy of the following levels:

- **Databases**: Top-level data structures in a MongoDB deployment that store collections.

- **Collections**: Groups of MongoDB documents. They are analogous to tables in relational databases.

- **Documents**: Units that store literal data such as strings, numbers, dates, and other embedded documents. For more information about document field types and structure, see the documents entry in the MongoDB Server manual.

## Accessing the Database

Access a database by calling the `db()` method on a `MongoClient` instance.

```js
const myDB = client.db("db_name");
```

> `NOTE`
> 
> Db name cannot contain a dot

`.db()` returns a Class `Db()`

>  Returning as **class instance** gives you an object with **methods and properties**
> 
> `Db` class → methods like `.collection()`, `.admin()`, `.listCollections()`.

## Accessing Collection

Access a collection by calling the `collection()` method on a `Db` instance.

```js
const collection = database.collection("test_collection");
```

Returns a reference to a MongoDB Collection

> `NOTE`
> 
> If the provided collection name does not already exist in the database, MongoDB implicitly creates the collection when you first insert data into it.

## Creating Collection

Call the `createCollection()` method on a `Db` instance.

```js
const createColl = await database.createCollection("example_collection");
```

Returns a Promise hence we need to use `wait`

> `NOTE`
> 
> Can specify collection options, such as maximum size and document validation rules, by passing a `CreateCollectionOptions` instance to the `createCollection()` method

> `createCollection()` can create capped collections(limited)
> 
> A **capped collection** is a special type of MongoDB collection that:
> 
> 1. Has a **fixed size** (in bytes).
> 
> 2. When it gets full → **oldest documents are automatically overwritten** by new ones (like a circular queue).
> 
> 3. Documents are stored in **insertion order** → queries return results in the order documents were inserted.
> 
> Useful for **high-throughput logging & caching** . and helpful in Logging (e.g., store last 1,000 events).
> 
> ```js
> const db = client.db("logsDB");
> 
> await db.createCollection("eventLogs", {
>   capped: true,
>   size: 1024 * 1024, // 1 MB max size
>   max: 1000          // optional: max 1000 documents
> });
> ```
