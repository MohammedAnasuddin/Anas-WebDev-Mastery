# Express Router

*Routing* refers to how an application’s endpoints (URIs) respond to client requests.

A `Router` instance is a complete middleware and routing system; for this reason, it is often referred to as a “mini-app”.

Router helps to group APIs

> `TIP`
> 
> Name/group the routes by the base segment of the path for better classification. 
> 
> For example `auth/signup` , `auth/login` name the router as `auth` (group them)

## Creating the Routers

1. Create a folder `src/routes`

2. Create a file for dedicated router (`auth.js`)

3. Create a Router by using `express.Router` ,`express.Router` class to create modular, mountable route handlers 
   
   1. `const authRouter = express.Router()`

4. To create Routes use the above router instead of `app`

5. Export the Router
   
   ```js
   const routerName = express.Router()
   routerName.post("/path", middleware, Route_Handler)
   module.exports=routerName
   ```

## Linking Routers to the Server

1. Require  the router in Server Entry.

2. using `app`, Create Dedicated `/` route for each Router 

3. Now , whenever a API call is made, Each router is checked for the path in the request if matched executes it's Router Handler. 

```js
const routerName= require("./routes/routerName")
app.use("/", routerName)
```

## Route Parameters and Query String

## Route Parameters

1.  route parameters as **required placeholders** for identifying a **specific resource**. They are part of the URL path itself.

2. define them in your route path using a colon (`:`).
   
   - `router.get('/users/:userId')`

3. **Access in Code**: Express puts the captured value into the `req.params` object.
   
   - For the URL above, `req.params.userId` would be the string `'12345'`.

### Query String / Parameters

1. query parameters as **optional filters, sorters, or options** for a list of resources. They are not part of the main URL path; they come at the end after a `?`.

2. The query string starts with a `?`. Each parameter is a `key=value` pair, and multiple parameters are separated by `&`.
   
   - `http://example.com/products?category=electronics&sort=price_desc`
   - > `NOTE`
     > 
     > *The route definition should just be `"/feed"`, not `"/feed/?page=page"`. Express handles the query string part automatically)*
     > 
     > Don't add the query string from the route definition. Express will automatically parse any query parameters from the incoming URL and make them available to you in the `req.query` object.

3. **Access in Code**: Express parses the query string into the `req.query` object.
   
   - For the URL above, `req.query` would be `{ category: 'electronics', sort: 'price_desc' }`.

## Router and Parameters

But if the parent route `/birds` has path parameters, it will not be accessible by default from the sub-routes. To make it accessible, you will need to pass the `mergeParams` option to the Router constructor.

```js
const router = express.Router({ mergeParams: true })
```
