# Connecting Collections

> ## Populating Documents
> 
> Populating is the process of *automatically replacing references (theÂ `ObjectId`s) in a document with the actual documents (associated with the same `ObjectId`) from another collection.*
> 
> Any field can be used in place of `ObjectId` but **it is the most common and highly recommended way.**

To connect Collections use `ref:"Collection_name"` in the Schema of required filed you would like to act as an bridge to the other Collection.

For Example connecting `Connection` to `User` via `fromId` 

```js
    fromUserId:{
        type: Schema.Types.ObjectId,
        required:true,
        ref:"User"
    }
```

## Getting Data  from Other Collection via this Link

use `collection.find().populate("bridge_field", ["field_1","filed_1"])`

Now all the fileds mentioned in the array are fetched from the Collection which is linked to Current Collection via bridge_field .

```js
   const requests = await Connection.find({
            toUserId:currentUser._id,
            status: "interested"
        }).populate("fromUserId", ["firstName"]) 
```

This get all the documents matches the conditions and then find the respective firstName from the  fromUserId  (bridge_field) from other Collection,

>  `TIP`
> 
> You can also use space separated fields in a string rather than arrays
> 
> Create and store this array/string store it in a variable so that reusable and consistent output.

Sample output

```json
[
  {
    _id: new ObjectId('68c7ea06331905d928116406'),     
    fromUserId: {
      _id: new ObjectId('68c2d7f6047a4d38cffa69d0'),   
      firstName: 'Loki'
    },
    toUserId: new ObjectId('68c2d7f6047a4d38cffa69d0'),
    status: 'interested',
    createdAt: 2025-09-15T09:51:00.294Z,
    updatedAt: 2025-09-15T10:02:42.437Z,
    __v: 0
  },
  {
    _id: new ObjectId('68c7ea36331905d928116409'),
    fromUserId: {
      _id: new ObjectId('68c540bfc476b24e6a7b487e'),
      firstName: 'Captain America'
    },
    toUserId: new ObjectId('68c2d7f6047a4d38cffa69d0'),
    status: 'interested',
    createdAt: 2025-09-15T09:51:00.294Z,
    updatedAt: 2025-09-15T10:02:42.437Z,
    __v: 0
  }
]
```

The formUserId(Bridge_filed) gets the firstName form the other collection 

## Formatting the Output

Map over each document and only send the `bridge_field.required_field`

```js
const data = requests.map(doc => "Request From "+doc.fromUserId.firstName)
```

 
